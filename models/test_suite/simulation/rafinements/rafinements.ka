%def:  "seed" "16602"

%agent: A(b,d)
%agent: B(a,c)
%agent: C(b,d)
%agent: D(c,a)

'AB' A(b),B(a) <-> A(b!1),B(a!1) @ 1e-2, 1
'BC' B(c),C(b) <-> B(c!1),C(b!1) @ 1e-2, 1
'CD' C(d),D(c) <-> C(d!1),D(c!1) @ 1e-2, 1
'DA' D(a),A(d) <-> D(a!1),A(d!1) @ 1e-2, 1


'CloseAB' A(b,d!1),B(a,c!3),C(b!3,d!4),D(c!4,a!1) -> A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!1) @ 1e2
'CloseBC' A(b!2,d!1),B(a!2,c),C(b,d!4),D(c!4,a!1) -> A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!1) @ 1e2
'CloseCD' A(b!2,d!1),B(a!2,c!3),C(b!3,d),D(c,a!1) -> A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!1) @ 1e2
'CloseDA' A(b!2,d),B(a!2,c!3),C(b!3,d!4),D(c!4,a) -> A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!1) @ 1e2

'close2AB' A(b,d!1),B(a,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!1) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!1) @ 1e2
'close2BC' A(b!2,d!1),B(a!2,c),C(b,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!1) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!1) @ 1e2
'close2CD' A(b!2,d!1),B(a!2,c!3),C(b!3,d),D(c,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!1) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!1) @ 1e2
'close2DA' A(b!2,d),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!1) @ 1e2

'close3AB' A(b,d!1),B(a,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!1) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!1) @ 1e2
'close3BC' A(b!2,d!1),B(a!2,c),C(b,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!1) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!1) @ 1e2
'close3CD' A(b!2,d!1),B(a!2,c!3),C(b!3,d),D(c,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!1) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!1) @ 1e2
'close3DA' A(b!2,d),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!1) @ 1e2

'close4AB' A(b,d!1),B(a,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!13),A(b!14,d!13),B(a!14,c!15),C(b!15,d!16),D(c!16,a!1) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!13),A(b!14,d!13),B(a!14,c!15),C(b!15,d!16),D(c!16,a!1) @ 1e2
'close4BC' A(b!2,d!1),B(a!2,c),C(b,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!13),A(b!14,d!13),B(a!14,c!15),C(b!15,d!16),D(c!16,a!1) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!13),A(b!14,d!13),B(a!14,c!15),C(b!15,d!16),D(c!16,a!1) @ 1e2
'close4CD' A(b!2,d!1),B(a!2,c!3),C(b!3,d),D(c,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!13),A(b!14,d!13),B(a!14,c!15),C(b!15,d!16),D(c!16,a!1) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!13),A(b!14,d!13),B(a!14,c!15),C(b!15,d!16),D(c!16,a!1) @ 1e2
'close4DA' A(b!2,d),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!13),A(b!14,d!13),B(a!14,c!15),C(b!15,d!16),D(c!16,a) -> \
  A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!13),A(b!14,d!13),B(a!14,c!15),C(b!15,d!16),D(c!16,a!1) @ 1e2


%var: 'un' A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!1)
%var: 'deux' A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!1)
%var: 'trois' A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!1)
%var: 'quatre' A(b!2,d!1),B(a!2,c!3),C(b!3,d!4),D(c!4,a!5),A(b!6,d!5),B(a!6,c!7),C(b!7,d!8),D(c!8,a!9)\
  ,A(b!10,d!9),B(a!10,c!11),C(b!11,d!12),D(c!12,a!13),A(b!14,d!13),B(a!14,c!15),C(b!15,d!16),D(c!16,a!1)

%plot: 'un'
%plot: 'deux'/2
%plot: 'trois'/3
%plot: 'quatre'/4

%init: 10000 A(),B(),C(),D()

%mod: [E] = [Emax] || [T] = [Tmax] do $SNAPSHOT "final.ka"
